stages:
  - test

unit_test:
  stage: test
  image: python:3.12

  script:
  - pip install -r ./app/requirements.txt
  - pip install pytest
  - pytest -v

# run only for merge requests
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event"
    - if: $CI_PIPELINE_SOURCE == "push" && $CI_COMMIT_BRANCH == "main"